# 项目启动说明

## ✅ 当前服务状态

### 后端服务（Spring Boot）
- **状态**: ✅ 运行中
- **端口**: 3000
- **健康检查**: http://localhost:3000/health
- **API基础路径**: http://localhost:3000/api

### 前端服务（Vite）
- **状态**: ✅ 运行中
- **端口**: 5173 或 5174（如果5173被占用）
- **访问地址**: http://localhost:5173/shaxian/ 或 http://localhost:5174/shaxian/

## 🚀 启动命令

### 启动后端

```bash
cd server-springboot
mvn spring-boot:run
```

或者使用已编译的jar：

```bash
cd server-springboot
java -jar target/shaxian-api-1.0.0.jar
```

### 启动前端

```bash
npm run dev
```

## 📋 启动前检查清单

### 1. 数据库准备
- [ ] MySQL服务已启动
- [ ] 数据库 `shaxian_erp` 已创建
- [ ] 已执行 `database/schema.sql` 创建表结构
- [ ] 已执行 `server-springboot/src/main/resources/data.sql` 初始化数据（可选）

### 2. 环境配置
- [ ] Java 17 已安装并配置
- [ ] Maven 已安装
- [ ] Node.js 和 npm 已安装
- [ ] 数据库连接配置正确（`application.yml`）

### 3. 端口检查
- [ ] 端口 3000 未被占用（后端）
- [ ] 端口 5173 未被占用（前端）

## 🔍 验证服务运行

### 检查后端
```bash
curl http://localhost:3000/health
```

应该返回：
```json
{
  "status": "ok",
  "timestamp": "2025-12-11T17:48:54.488336"
}
```

### 检查前端
打开浏览器访问：http://localhost:5173/shaxian/

应该看到登录页面。

## 🛠️ 常见问题

### 1. 后端启动失败

**问题**: 端口被占用
```bash
# 检查端口占用
lsof -i :3000

# 杀死占用进程
kill -9 <PID>
```

**问题**: 数据库连接失败
- 检查 MySQL 服务是否启动
- 检查 `application.yml` 中的数据库配置
- 确认数据库 `shaxian_erp` 已创建

### 2. 前端启动失败

**问题**: 端口被占用
- Vite 会自动尝试其他端口（5174, 5175等）
- 查看启动日志确认实际端口

**问题**: 依赖未安装
```bash
npm install
```

### 3. 前后端无法通信

**问题**: CORS 错误
- 检查后端 `WebConfig.java` 中的 CORS 配置
- 确认前端 API 基础路径配置正确

**问题**: API 404
- 确认后端服务已启动
- 检查 API 路径是否正确（`/api` 前缀）

## 📝 启动日志位置

### 后端日志
- 控制台输出
- 日志级别配置在 `application.yml`

### 前端日志
- 控制台输出
- Vite 开发服务器日志

## 🎯 快速启动脚本

可以创建一个启动脚本 `start.sh`：

```bash
#!/bin/bash

# 启动后端
echo "启动后端服务..."
cd server-springboot
mvn spring-boot:run &
BACKEND_PID=$!

# 等待后端启动
sleep 10

# 启动前端
echo "启动前端服务..."
cd ..
npm run dev &
FRONTEND_PID=$!

echo "后端PID: $BACKEND_PID"
echo "前端PID: $FRONTEND_PID"
echo ""
echo "后端: http://localhost:3000"
echo "前端: http://localhost:5173/shaxian/"
echo ""
echo "按 Ctrl+C 停止服务"
```

---

**最后更新**: 2025-12-11
**项目版本**: 1.0.0

