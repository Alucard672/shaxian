# 执行密码字段迁移

## 问题
测试发现数据库 `employees` 表缺少 `password` 字段，导致登录功能无法正常工作。

## 解决方案

执行以下SQL脚本添加 `password` 字段：

```bash
# 方式1: 使用mysql命令行
mysql -u root -p shaxian_erp < database/migration_add_password.sql

# 方式2: 手动执行SQL
mysql -u root -p
```

然后在MySQL中执行：

```sql
USE shaxian_erp;

-- 添加password字段
ALTER TABLE employees 
ADD COLUMN password VARCHAR(255) NULL AFTER role;

-- 更新现有员工的默认密码为123456
UPDATE employees SET password = '123456' WHERE password IS NULL OR password = '';

-- 如果employees表中没有数据，插入默认管理员账号
INSERT IGNORE INTO employees (id, name, phone, role, password, status, created_at, updated_at) 
VALUES ('emp-admin-001', '系统管理员', '13800138000', 'role-boss', '123456', 'active', NOW(), NOW());
```

## 验证

执行迁移后，运行测试验证：

```bash
npm run test:auth
```

应该看到所有测试通过。


