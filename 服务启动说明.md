# 服务启动说明

## 快速启动

### 方法1: 一键启动所有服务（推荐）

```bash
./启动所有服务.sh
```

这个脚本会自动：
- 检查并启动后端服务（Spring Boot）
- 检查并启动前端服务（Vite）
- 显示服务状态和访问地址

### 方法2: 分别启动服务

#### 启动后端服务

```bash
cd server-springboot
mvn spring-boot:run
```

或者使用已编译的jar：

```bash
cd server-springboot
java -jar target/shaxian-api-1.0.0.jar
```

#### 启动前端服务

```bash
npm run dev
```

## 服务地址

### 后端服务
- **地址**: http://localhost:3000
- **健康检查**: http://localhost:3000/health
- **API地址**: http://localhost:3000/api

### 前端服务
- **地址**: http://localhost:5173/shaxian/ （或 5174/5175，如果5173被占用）

## 检查服务状态

### 检查后端服务

```bash
curl http://localhost:3000/health
```

应该返回：
```json
{"status":"ok","timestamp":"2025-12-12T17:10:35.574094"}
```

### 检查前端服务

打开浏览器访问：http://localhost:5173/shaxian/

应该看到登录页面。

## 查看日志

### 后端日志

```bash
tail -f /tmp/springboot.log
```

### 前端日志

```bash
tail -f /tmp/vite.log
```

## 停止服务

### 停止后端服务

```bash
pkill -f 'spring-boot:run'
```

或者找到进程ID后kill：

```bash
ps aux | grep 'spring-boot:run'
kill <PID>
```

### 停止前端服务

```bash
pkill -f 'vite'
```

或者按 `Ctrl+C`（如果在终端中直接运行）

## 常见问题

### 1. 端口被占用

**后端端口3000被占用**：
```bash
lsof -i :3000
kill -9 <PID>
```

**前端端口5173被占用**：
Vite会自动尝试其他端口（5174, 5175等）

### 2. 后端服务启动失败

**检查数据库连接**：
- 确保MySQL服务已启动
- 检查 `server-springboot/src/main/resources/application.yml` 中的数据库配置

**检查编译错误**：
```bash
cd server-springboot
mvn clean compile
```

### 3. 前端服务启动失败

**检查依赖**：
```bash
npm install
```

**检查Node.js版本**：
```bash
node --version  # 需要 Node.js 18+
```

## 启动前检查清单

- [ ] MySQL服务已启动
- [ ] 数据库 `shaxian_erp` 已创建
- [ ] 已执行数据库迁移脚本（添加password字段）
- [ ] Java 17+ 已安装
- [ ] Maven已安装
- [ ] Node.js 18+ 已安装
- [ ] 端口3000未被占用（后端）
- [ ] 端口5173未被占用（前端，可选）

## 测试服务

启动服务后，运行测试：

```bash
# 初始化测试用户（如果还没有）
npm run test:init

# 运行登录流程测试
npm run test:auth
```


